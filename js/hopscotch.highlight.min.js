!function(t,e){"use strict";if("function"==typeof define&&define.amd)define([],e);else if("object"==typeof exports)module.exports=e();else{var i="hopscotch";if(t[i])return;t[i]=e()}}(this,function(){var Hopscotch,HopscotchBubble,HopscotchCalloutManager,HopscotchI18N,customI18N,customRenderer,customEscape,utils,callbacks,helpers,winLoadHandler,defaultOpts,winHopscotch,templateToUse="bubble_default",Sizzle=window.Sizzle||null,undefinedStr="undefined",waitingToStart=!1,hasJquery=typeof jQuery!==undefinedStr,hasSessionStorage=!1,isStorageWritable=!1,document=window.document,validIdRegEx=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,rtlMatches={left:"right",right:"left"};try{typeof window.sessionStorage!==undefinedStr&&(hasSessionStorage=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),isStorageWritable=!0)}catch(err){}return defaultOpts={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state",highlight:!1,highlightMargin:0},Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),winLoadHandler=function(){waitingToStart&&winHopscotch.startTour()},utils={addClass:function(t,e){var i,n,s,o;if(t.className){for(n=e.split(/\s+/),i=" "+t.className+" ",s=0,o=n.length;o>s;++s)i.indexOf(" "+n[s]+" ")<0&&(i+=n[s]+" ");t.className=i.replace(/^\s+|\s+$/g,"")}else t.className=e},removeClass:function(t,e){var i,n,s,o;for(n=e.split(/\s+/),i=" "+t.className+" ",s=0,o=n.length;o>s;++s)i=i.replace(" "+n[s]+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")},hasClass:function(t,e){var i;return t.className?(i=" "+t.className+" ",-1!==i.indexOf(" "+e+" ")):!1},getPixelValue:function(t){var e=typeof t;return"number"===e?t:"string"===e?parseInt(t,10):0},valOrDefault:function(t,e){return typeof t!==undefinedStr?t:e},invokeCallbackArrayHelper:function(t){var e;return Array.isArray(t)&&(e=helpers[t[0]],"function"==typeof e)?e.apply(this,t.slice(1)):void 0},invokeCallbackArray:function(t){var e,i;if(Array.isArray(t)){if("string"==typeof t[0])return utils.invokeCallbackArrayHelper(t);for(e=0,i=t.length;i>e;++e)utils.invokeCallback(t[e])}},invokeCallback:function(t){return"function"==typeof t?t():"string"==typeof t&&helpers[t]?helpers[t]():utils.invokeCallbackArray(t)},invokeEventCallbacks:function(t,e){var i,n,s=callbacks[t];if(e)return this.invokeCallback(e);for(i=0,n=s.length;n>i;++i)this.invokeCallback(s[i].cb)},getScrollTop:function(){var t;return t=typeof window.pageYOffset!==undefinedStr?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){var t;return t=typeof window.pageXOffset!==undefinedStr?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},addEvtListener:function(t,e,i){return t?t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i):void 0},removeEvtListener:function(t,e,i){return t?t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i):void 0},documentIsReady:function(){return"complete"===document.readyState},evtPreventDefault:function(t){t.preventDefault?t.preventDefault():event&&(event.returnValue=!1)},extend:function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},getStepTargetHelper:function(t){var e=document.getElementById(t);if(e)return e;if(hasJquery)return e=jQuery(t),e.length?e[0]:null;if(Sizzle)return e=new Sizzle(t),e.length?e[0]:null;if(document.querySelector)try{return document.querySelector(t)}catch(i){}return/^#[a-zA-Z][\w-_:.]*$/.test(t)?document.getElementById(t.substring(1)):null},getStepTarget:function(t){var e;if(!t||!t.target)return null;if("string"==typeof t.target)return utils.getStepTargetHelper(t.target);if(Array.isArray(t.target)){var i,n;for(i=0,n=t.target.length;n>i;i++)if("string"==typeof t.target[i]&&(e=utils.getStepTargetHelper(t.target[i])))return e;return null}return t.target},getI18NString:function(t){return customI18N[t]||HopscotchI18N[t]},setState:function(t,e,i){var n,s="";if(hasSessionStorage&&isStorageWritable)try{sessionStorage.setItem(t,e)}catch(o){isStorageWritable=!1,this.setState(t,e,i)}else hasSessionStorage&&sessionStorage.removeItem(t),i&&(n=new Date,n.setTime(n.getTime()+24*i*60*60*1e3),s="; expires="+n.toGMTString()),document.cookie=t+"="+e+s+"; path=/"},getState:function(t){var e,i,n,s=t+"=",o=document.cookie.split(";");if(hasSessionStorage&&(n=sessionStorage.getItem(t)))return n;for(e=0;e<o.length;e++){for(i=o[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(s)){n=i.substring(s.length,i.length);break}}return n},clearState:function(t){hasSessionStorage?sessionStorage.removeItem(t):this.setState(t,"",-1)},normalizePlacement:function(t){!t.placement&&t.orientation&&(t.placement=t.orientation)},flipPlacement:function(t){if(t.isRtl&&!t._isFlipped){var e,i,n=["orientation","placement"];t.xOffset&&(t.xOffset=-1*this.getPixelValue(t.xOffset));for(i in n)e=n[i],t.hasOwnProperty(e)&&rtlMatches.hasOwnProperty(t[e])&&(t[e]=rtlMatches[t[e]]);t._isFlipped=!0}}},utils.addEvtListener(window,"load",winLoadHandler),callbacks={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},helpers={},HopscotchI18N={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},customI18N={},HopscotchBubble=function(t){this.init(t)},HopscotchBubble.prototype={isShowing:!1,currStep:void 0,setPosition:function(t){var e,i,n,s,o,l,r,a=this,u=utils.getStepTarget(t),c=this.element,h=this.arrowEl,p=t.isRtl?"right":"left";if(utils.flipPlacement(t),utils.normalizePlacement(t),i=c.offsetWidth,e=c.offsetHeight,utils.removeClass(c,"fade-in-down fade-in-up fade-in-left fade-in-right"),n=u.getBoundingClientRect(),r=t.isRtl?n.right-i:n.left,"top"===t.placement)s=n.top-e-this.opt.arrowWidth,o=r;else if("bottom"===t.placement)s=n.bottom+this.opt.arrowWidth,o=r;else if("left"===t.placement)s=n.top,o=n.left-i-this.opt.arrowWidth;else{if("right"!==t.placement)throw new Error("Bubble placement failed because step.placement is invalid or undefined!");s=n.top,o=n.right+this.opt.arrowWidth}a.highlight.setPosition(t,n),l="center"!==t.arrowOffset?utils.getPixelValue(t.arrowOffset):t.arrowOffset,l?"top"===t.placement||"bottom"===t.placement?(h.style.top="","center"===l?h.style[p]=Math.floor(i/2-h.offsetWidth/2)+"px":h.style[p]=l+"px"):("left"===t.placement||"right"===t.placement)&&(h.style[p]="","center"===l?h.style.top=Math.floor(e/2-h.offsetHeight/2)+"px":h.style.top=l+"px"):(h.style.top="",h.style[p]=""),"center"===t.xOffset?o=n.left+u.offsetWidth/2-i/2:o+=utils.getPixelValue(t.xOffset),"center"===t.yOffset?s=n.top+u.offsetHeight/2-e/2:s+=utils.getPixelValue(t.yOffset),t.fixedElement||(s+=utils.getScrollTop(),o+=utils.getScrollLeft()),c.style.position=t.fixedElement?"fixed":"absolute",c.style.top=s+"px",c.style.left=o+"px"},render:function(t,e,n){var s,o,l,r,a,u,c,h,p,d=this.element;if(t?this.currStep=t:this.currStep&&(t=this.currStep),this.highlight.render(t),this.opt.isTourBubble?(r=winHopscotch.getCurrTour(),r&&(o=r.customData,s=r.customRenderer,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:r.hasOwnProperty("isRtl")?r.isRtl:this.opt.isRtl,l=r.unsafe,Array.isArray(r.steps)&&(a=r.steps.length,u=this._getStepI18nNum(this._getStepNum(a-1)),h=this._getStepNum(e)===this._getStepNum(a-1)))):(o=t.customData,s=t.customRenderer,l=t.unsafe,t.isRtl=t.hasOwnProperty("isRtl")?t.isRtl:this.opt.isRtl),c=h?utils.getI18NString("doneBtn"):t.showSkip?utils.getI18NString("skipBtn"):utils.getI18NString("nextBtn"),utils.flipPlacement(t),utils.normalizePlacement(t),this.placement=t.placement,p={i18n:{prevBtn:utils.getI18NString("prevBtn"),nextBtn:c,closeTooltip:utils.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(e)),numSteps:u},buttons:{showPrev:utils.valOrDefault(t.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(e)>0,showNext:utils.valOrDefault(t.showNextButton,this.opt.showNextButton),showCTA:utils.valOrDefault(t.showCTAButton&&t.ctaLabel,!1),ctaLabel:t.ctaLabel,showClose:utils.valOrDefault(this.opt.showCloseButton,!0)},step:{num:e,isLast:utils.valOrDefault(h,!1),title:t.title||"",content:t.content||"",isRtl:t.isRtl,placement:t.placement,padding:utils.valOrDefault(t.padding,this.opt.bubblePadding),width:utils.getPixelValue(t.width)||this.opt.bubbleWidth,customData:t.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:a,unsafe:utils.valOrDefault(l,!1),customData:o||{}}},"function"==typeof s)d.innerHTML=s(p);else if("string"==typeof s){if(!winHopscotch.templates||"function"!=typeof winHopscotch.templates[s])throw new Error('Bubble rendering failed - template "'+s+'" is not a function.');d.innerHTML=winHopscotch.templates[s](p)}else if(customRenderer)d.innerHTML=customRenderer(p);else{if(!winHopscotch.templates||"function"!=typeof winHopscotch.templates[templateToUse])throw new Error('Bubble rendering failed - template "'+templateToUse+'" is not a function.');d.innerHTML=winHopscotch.templates[templateToUse](p)}for(children=d.children,numChildren=children.length,i=0;i<numChildren;i++)node=children[i],utils.hasClass(node,"hopscotch-arrow")&&(this.arrowEl=node);return d.style.zIndex="number"==typeof t.zindex?t.zindex:"",this._setArrow(t.placement),this.hide(!1),this.setPosition(t),n&&n(!t.fixedElement),this},_getStepNum:function(t){var e,i,n=0,s=winHopscotch.getSkippedStepsIndexes(),o=s.length;for(i=0;o>i;i++)e=s[i],t>e&&n++;return t-n},_getStepI18nNum:function(t){var e=utils.getI18NString("stepNums");return e&&t<e.length?t=e[t]:t+=1,t},_setArrow:function(t){utils.removeClass(this.arrowEl,"down up right left"),"top"===t?utils.addClass(this.arrowEl,"down"):"bottom"===t?utils.addClass(this.arrowEl,"up"):"left"===t?utils.addClass(this.arrowEl,"right"):"right"===t&&utils.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var t=this,e="fade-in-"+this._getArrowDirection(),i=1e3;return utils.removeClass(this.element,"hide"),utils.addClass(this.element,e),setTimeout(function(){utils.removeClass(t.element,"invisible")},50),setTimeout(function(){utils.removeClass(t.element,e)},i),this.isShowing=!0,this.highlight.show(),this},hide:function(t){var e=this.element;return t=utils.valOrDefault(t,!0),e.style.top="",e.style.left="",t?(utils.addClass(e,"hide"),utils.removeClass(e,"invisible")):(utils.removeClass(e,"hide"),utils.addClass(e,"invisible")),utils.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this.highlight.hide(),this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t),utils.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(t){function e(i){return i===t.currentTarget?null:utils.hasClass(i,"hopscotch-cta")?"cta":utils.hasClass(i,"hopscotch-next")?"next":utils.hasClass(i,"hopscotch-prev")?"prev":utils.hasClass(i,"hopscotch-close")?"close":e(i.parentElement)}var i;t=t||window.event;var n=t.target||t.srcElement;if(i=e(n),"cta"===i)this.opt.isTourBubble||winHopscotch.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&utils.invokeCallback(this.currStep.onCTA);else if("next"===i)winHopscotch.nextStep(!0);else if("prev"===i)winHopscotch.prevStep(!0);else if("close"===i){if(this.opt.isTourBubble){var s=winHopscotch.getCurrStepNum(),o=winHopscotch.getCurrTour(),l=s===o.steps.length-1;utils.invokeEventCallbacks("close"),winHopscotch.endTour(!0,l)}else this.opt.onClose&&utils.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?winHopscotch.getCalloutManager().removeCallout(this.opt.id):this.destroy();utils.evtPreventDefault(t)}},init:function(t){var e,i,n,s,o=document.createElement("div"),l=this,r=!1;this.element=o,s={showPrevButton:defaultOpts.showPrevButton,showNextButton:defaultOpts.showNextButton,bubbleWidth:defaultOpts.bubbleWidth,bubblePadding:defaultOpts.bubblePadding,arrowWidth:defaultOpts.arrowWidth,isRtl:defaultOpts.isRtl,showNumber:!0,isTourBubble:!0},t=typeof t===undefinedStr?{}:t,utils.extend(s,t),this.opt=s,o.className="hopscotch-bubble animated",s.isTourBubble?(n=winHopscotch.getCurrTour(),n&&utils.addClass(o,"tour-"+n.id)):utils.addClass(o,"hopscotch-callout no-number"),l.highlight=new HopscotchHighlight(t),e=function(){!r&&l.isShowing&&(r=!0,setTimeout(function(){l.setPosition(l.currStep),r=!1},100))},utils.addEvtListener(window,"resize",e),this.clickCb=function(t){l._handleBubbleClick(t)},utils.addEvtListener(o,"click",this.clickCb),this.hide(),utils.documentIsReady()?(document.body.appendChild(o),l.highlight.addToDom()):(document.addEventListener?(i=function(){document.removeEventListener("DOMContentLoaded",i),window.removeEventListener("load",i),document.body.appendChild(o),l.highlight.addToDom()},document.addEventListener("DOMContentLoaded",i,!1)):(i=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),window.detachEvent("onload",i),document.body.appendChild(o),l.highlight.addToDom())},document.attachEvent("onreadystatechange",i)),utils.addEvtListener(window,"load",i))}},HopscotchCalloutManager=function(){var t={},e={};this.createCallout=function(i){var n;if(!i.id)throw new Error("Must specify a callout id.");if(!validIdRegEx.test(i.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(t[i.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!utils.getStepTarget(i))throw new Error("Must specify existing target element via 'target' option.");return i.showNextButton=i.showPrevButton=!1,i.isTourBubble=!1,n=new HopscotchBubble(i),t[i.id]=n,e[i.id]=i,n.render(i,null,function(){n.show(),i.onShow&&utils.invokeCallback(i.onShow)}),n},this.getCallout=function(e){return t[e]},this.removeAllCallouts=function(){var e;for(e in t)t.hasOwnProperty(e)&&this.removeCallout(e)},this.removeCallout=function(i){var n=t[i];t[i]=null,e[i]=null,n&&n.destroy()},this.refreshCalloutPositions=function(){var i,n,s;for(i in t)t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&(n=t[i],s=e[i],n&&s&&n.setPosition(s))}},Hopscotch=function(t){var e,i,n,s,o,l,r,a,u=this,c={},h=[],p=function(t){return e&&e.element&&e.element.parentNode||(e=new HopscotchBubble(n)),t&&utils.extend(e.opt,{bubblePadding:f("bubblePadding"),bubbleWidth:f("bubbleWidth"),showNextButton:f("showNextButton"),showPrevButton:f("showPrevButton"),showCloseButton:f("showCloseButton"),arrowWidth:f("arrowWidth"),isRtl:f("isRtl")}),e},d=function(){e&&(e.destroy(),e=null)},f=function(t){return"undefined"==typeof n?defaultOpts[t]:utils.valOrDefault(n[t],defaultOpts[t])},g=function(){var t;return t=!s||0>o||o>=s.steps.length?null:s.steps[o]},m=function(){u.nextStep()},v=function(t){var e,i,n,s,o,l,r=p(),a=r.element,u=utils.getPixelValue(a.style.top),c=u+utils.getPixelValue(a.offsetHeight),h=utils.getStepTarget(g()),d=h.getBoundingClientRect(),m=d.top+utils.getScrollTop(),v=d.bottom+utils.getScrollTop(),b=m>u?u:m,w=c>v?c:v,S=utils.getScrollTop(),y=S+utils.getWindowHeight(),C=b-f("scrollTopMargin");b>=S&&(b<=S+f("scrollTopMargin")||y>=w)?t&&t():f("smoothScroll")?typeof YAHOO!==undefinedStr&&typeof YAHOO.env!==undefinedStr&&typeof YAHOO.env.ua!==undefinedStr&&typeof YAHOO.util!==undefinedStr&&typeof YAHOO.util.Scroll!==undefinedStr?(e=YAHOO.env.ua.webkit?document.body:document.documentElement,n=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,i=new YAHOO.util.Scroll(e,{scroll:{to:[0,C]}},f("scrollDuration")/1e3,n),i.onComplete.subscribe(t),i.animate()):hasJquery?jQuery("body, html").animate({scrollTop:C},f("scrollDuration"),t):(0>C&&(C=0),s=S>b?-1:1,o=Math.abs(S-C)/(f("scrollDuration")/10),(l=function(){var e=utils.getScrollTop(),i=e+s*o;return s>0&&i>=C||0>s&&C>=i?(i=C,t&&t(),void window.scrollTo(0,i)):(window.scrollTo(0,i),utils.getScrollTop()===e?void(t&&t()):void setTimeout(l,10))})()):(window.scrollTo(0,C),t&&t())},b=function(t,e){var i,n,l;o+t>=0&&o+t<s.steps.length?(o+=t,n=g(),l=function(){i=utils.getStepTarget(n),i?(c[o]&&delete c[o],e(o)):(c[o]=!0,utils.invokeEventCallbacks("error"),b(t,e))},n.delay?setTimeout(l,n.delay):l()):e(-1)},w=function(t,e){var i,n,l,r,a=p(),u=this;if(a.hide(),t=utils.valOrDefault(t,!0),i=g(),i.nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(i),"click",m),n=i,l=e>0?n.multipage:o>0&&s.steps[o-1].multipage,r=function(i){var s;if(-1===i)return this.endTour(!0);if(t&&(s=e>0?utils.invokeEventCallbacks("next",n.onNext):utils.invokeEventCallbacks("prev",n.onPrev)),i===o){if(l)return void T();s=utils.valOrDefault(s,!0),s?this.showStep(i):this.endTour(!1)}},!l&&f("skipIfNoElement"))b(e,function(t){r.call(u,t)});else if(o+e>=0&&o+e<s.steps.length){if(o+=e,i=g(),!utils.getStepTarget(i)&&!l)return utils.invokeEventCallbacks("error"),this.endTour(!0,!1);r.call(this,o)}else if(o+e===s.steps.length)return this.endTour();return this},S=function(t){var e,i,n,s={};for(e in t)t.hasOwnProperty(e)&&"id"!==e&&"steps"!==e&&(s[e]=t[e]);return a.call(this,s,!0),i=utils.getState(f("cookieName")),i&&(n=i.split(":"),l=n[0],r=n[1],n.length>2&&(h=n[2].split(",")),r=parseInt(r,10)),this},y=function(t,e,i){var n,s;if(o=t||0,c=e||{},n=g(),s=utils.getStepTarget(n))return void i(o);if(!s){if(utils.invokeEventCallbacks("error"),c[o]=!0,f("skipIfNoElement"))return void b(1,i);o=-1,i(o)}},C=function(t){function e(){n.show(),utils.invokeEventCallbacks("show",i.onShow)}var i=s.steps[t],n=p(),l=utils.getStepTarget(i);o!==t&&g().nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(g()),"click",m),o=t,n.hide(!1),n.render(i,t,function(t){t?v(e):e(),i.nextOnTargetClick&&utils.addEvtListener(l,"click",m)}),T()},T=function(){var t=s.id+":"+o,e=winHopscotch.getSkippedStepsIndexes();e&&e.length>0&&(t+=":"+e.join(",")),utils.setState(f("cookieName"),t,1)},x=function(t){t&&this.configure(t)};this.getCalloutManager=function(){return typeof i===undefinedStr&&(i=new HopscotchCalloutManager),i},this.startTour=function(t,e){var i,n,o={},a=this;if(!s){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!validIdRegEx.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");s=t,S.call(this,t)}if(typeof e!==undefinedStr){if(e>=s.steps.length)throw new Error("Specified step number out of bounds.");n=e}if(!utils.documentIsReady())return waitingToStart=!0,this;if("undefined"==typeof n&&s.id===l&&typeof r!==undefinedStr){if(n=r,h.length>0)for(var u=0,c=h.length;c>u;u++)o[h[u]]=!0}else n||(n=0);return y(n,o,function(t){var e=-1!==t&&utils.getStepTarget(s.steps[t]);return e?(utils.invokeEventCallbacks("start"),i=p(),i.hide(!1),a.isActive=!0,void(utils.getStepTarget(g())?a.showStep(t):(utils.invokeEventCallbacks("error"),f("skipIfNoElement")&&a.nextStep(!1)))):void a.endTour(!1,!1)}),this},this.showStep=function(t){var e=s.steps[t];if(utils.getStepTarget(e))return e.delay?setTimeout(function(){C(t)},e.delay):C(t),this},this.prevStep=function(t){return w.call(this,t,-1),this},this.nextStep=function(t){return w.call(this,t,1),this},this.endTour=function(t,e){var i,n=p();return t=utils.valOrDefault(t,!0),e=utils.valOrDefault(e,!0),s&&(i=g(),i&&i.nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(i),"click",m)),o=0,r=void 0,n.hide(),t&&utils.clearState(f("cookieName")),this.isActive&&(this.isActive=!1,s&&e&&utils.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),d(),s=null,this},this.getCurrTour=function(){return s},this.getCurrTarget=function(){return utils.getStepTarget(g())},this.getCurrStepNum=function(){return o},this.getSkippedStepsIndexes=function(){var t,e=[];for(t in c)e.push(t);return e},this.refreshBubblePosition=function(){var t=g();return t&&p().setPosition(t),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(t,e,i){return t&&callbacks[t].push({cb:e,fromTour:i}),this},this.unlisten=function(t,e){var i,n,s=callbacks[t];for(i=0,n=s.length;n>i;++i)s[i]===e&&s.splice(i,1);return this},this.removeCallbacks=function(t,e){var i,n,s,o;for(o in callbacks)if(!t||t===o)if(e)for(i=callbacks[o],n=0,s=i.length;s>n;++n)i[n].fromTour&&(i.splice(n--,1),--s);else callbacks[o]=[];return this},this.registerHelper=function(t,e){"string"==typeof t&&"function"==typeof e&&(helpers[t]=e)},this.unregisterHelper=function(t){helpers[t]=null},this.invokeHelper=function(t){var e,i,n=[];for(e=1,i=arguments.length;i>e;++e)n.push(arguments[e]);helpers[t]&&helpers[t].call(null,n)},this.setCookieName=function(t){return n.cookieName=t,this},this.resetDefaultOptions=function(){return n={},this},this.resetDefaultI18N=function(){return customI18N={},this},this.getState=function(){return utils.getState(f("cookieName"))},a=function(t,e){var i,s,o,l,r=["next","prev","start","end","show","error","close"];for(n||this.resetDefaultOptions(),utils.extend(n,t),t&&utils.extend(customI18N,t.i18n),o=0,l=r.length;l>o;++o)s="on"+r[o].charAt(0).toUpperCase()+r[o].substring(1),t[s]&&this.listen(r[o],t[s],e);return i=p(!0),this},this.configure=function(t){return a.call(this,t,!1)},this.setRenderer=function(t){var e=typeof t;return"string"===e?(templateToUse=t,customRenderer=void 0):"function"===e&&(customRenderer=t),this},this.setEscaper=function(t){return"function"==typeof t&&(customEscape=t),this},x.call(this,t)},HopscotchHighlight=function(t){this.init(t)},HopscotchHighlight.prototype={init:function(t){var e,i={top:document.createElement("div"),left:document.createElement("div"),right:document.createElement("div"),bottom:document.createElement("div")};this.element=i,e={highlight:defaultOpts.highlight,highlightMargin:defaultOpts.highlightMargin},t=typeof t===undefinedStr?{}:t,utils.extend(e,t),this.opt=e;for(var n in this.element)utils.addClass(this.element[n],"hopscotch-overlay")},addToDom:function(){for(var t in this.element)document.body.appendChild(this.element[t])},show:function(){if(this.stepOpts.highlight)for(var t in this.element)utils.removeClass(this.element[t],"hide")},hide:function(){for(var t in this.element)utils.addClass(this.element[t],"hide")},setPosition:function(t,e){if(this.stepOpts.highlight){var i=this.stepOpts.highlightMargin,n=document.body,s=document.documentElement,o=Math.max(n.scrollHeight,n.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight);el=this.element.top,el.style.top="0px",el.style.left="0px",el.style.width=window.screen.width+"px",el.style.height=e.top+utils.getScrollTop()-i+"px",el=this.element.right,el.style.top=e.top+utils.getScrollTop()-i+"px",el.style.left=e.left+e.width+utils.getScrollLeft()+i+"px",el.style.width=window.screen.width-(e.left+e.width+utils.getScrollLeft()+i)+"px",el.style.height=e.height+2*i+"px",el=this.element.bottom,el.style.top=e.top+utils.getScrollTop()+e.height+i+"px",el.style.left="0px",el.style.width=window.screen.width+"px",el.style.height=o-(e.top+utils.getScrollTop()+e.height+i)+"px",el=this.element.left,el.style.top=e.top+utils.getScrollTop()+-i+"px",el.style.left="0px",el.style.width=e.left+utils.getScrollLeft()-i+"px",el.style.height=e.height+2*i+"px"}},render:function(t){this.stepOpts={},utils.extend(this.stepOpts,this.opt),utils.extend(this.stepOpts,t)}},winHopscotch=new Hopscotch,function(){var _={};_.escape=function(t){return customEscape?customEscape(t):null==t?"":(""+t).replace(new RegExp("[&<>\"']","g"),function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&quot;":"'"==t?"&#x27;":void 0})},this.templates=this.templates||{},this.templates.bubble_default=function(obj){function optEscape(t,e){return e?_.escape(t):t}obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(__t=step.width)?"":__t)+"px; padding: "+(null==(__t=step.padding)?"":__t)+'px;">\n  ',tour.isTour&&(__p+='<span class="hopscotch-bubble-number">'+(null==(__t=i18n.stepNum)?"":__t)+"</span>"),__p+='\n  <div class="hopscotch-bubble-content">\n    ',""!==step.title&&(__p+='<h3 class="hopscotch-title">'+(null==(__t=optEscape(step.title,tour.unsafe))?"":__t)+"</h3>"),__p+="\n    ",""!==step.content&&(__p+='<div class="hopscotch-content">'+(null==(__t=optEscape(step.content,tour.unsafe))?"":__t)+"</div>"),__p+='\n  </div>\n  <div class="hopscotch-actions">\n    ',buttons.showPrev&&(__p+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(__t=i18n.prevBtn)?"":__t)+"</button>"),__p+="\n    ",buttons.showCTA&&(__p+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(__t=buttons.ctaLabel)?"":__t)+"</button>"),__p+="\n    ",buttons.showNext&&(__p+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(__t=i18n.nextBtn)?"":__t)+"</button>"),__p+="\n  </div>\n  ",buttons.showClose&&(__p+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(__t=i18n.closeTooltip)?"":__t)+"</button>"),__p+='\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>';return __p}}.call(winHopscotch),winHopscotch});